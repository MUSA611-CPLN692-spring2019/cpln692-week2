<!DOCTYPE html>
<html>
  <head>
    <!--stylesheet imports-->
    <link rel="stylesheet" href="leaflet.css" />
  </head>
  <body>
    <!--left panel-->
    <div style="position:fixed;left:0px;width:400px">
    </div>
    <!--map-->
    <div id="map" style="position:fixed;right:0px;left:400px;height:100%;">
    </div>

    <!--javascript imports-->
    <script src="leaflet.js"></script>
    <script src="health_centers.js"></script>

    <!--Your code starts here-->
    <script>
      var map = L.map('map', {
        center: [39.9522, -75.1639],
        zoom: 14
      });
      var Stamen_TonerLite = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {
	      attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      	subdomains: 'abcd',
      	minZoom: 0,
      	maxZoom: 20,
      	ext: 'png'
      }).addTo(map);


    </script>
    <script>
      /* =====================

      # Week 2 - Assignment

      ## Introduction

       This week's assignment as having two separate parts:

       1. Log a series of arrays to the console that represents the health_centers dataset
       in array form. For example, [{'first': 1, 'second': 44}, {'first': 2, 'second': 12}]
       becomes [['first','second'],[1, 44],[2, 12]]

       2. Put a marker on the map for each health center in the specified lat/lng coordinates
       with a popup (a simple text dialog) that shows that location's name when its marker
       is clicked.

       EXTRA: Some of these locations offer dental services as well. Can you find some way to
       give dental locations a different icon? (Here's some relevant documentation:
       http://leafletjs.com/reference.html#icon)

       Remember: functions are meant to facilitate code comprehension and reuse. Try to
       use them to organize your code.
      ===================== */


      /* =====================

      Start code

      ===================== */

      var jsonToCsv = function(json) { console.log(json); };
      let healthCentersArray = [['LNG','LAT','OBJECTID','NAME','ORGANIZATION','ZIP','PHONE','WEBSITE','DENTAL_PHONE','FULL_ADDRESS'],
          [-75.16472099534634,40.034508187448395,1,'Covenant Health Services','Covenant',19144,'215-844-0181','http://covenanthousehealth.org/','N/A','251 East Bringhurst Street'],
          [-75.17898120530263,40.06738292573648,2,"Mt. Pleasant Medical Center","Covenant",19150,"215-248-7560","http://covenanthousehealth.org/","N/A","8125 Stenton Avenue"],
          [-75.16141103997865,39.967025897357665,3,"Fairmount Primary Care Center","DVCH",19130,"215-235-9600","http://www.dvch.org/dvch/Locations/FairmountPrimaryCareCenter/tabid/100/language/en-US/Default.aspx","215-235-9600","1412 Fairmount Avenue"],
          [-75.18387328197538,39.9530635609646,4,"Fairmount Primary Care Center at Horizon House","DVCH",19104,"215-222-2466","http://www.dvch.org/dvch/Locations/FairmountPrimaryCareCenteratHorizonHouse/tabid/101/language/en-US/Default.aspx","N/A","120 S. 30th Street"],
          [-75.16276471850303,39.97183994499194,5,"Fairmount Primary Care Center at St. Josephs Hospital","DVCH",19130,"215-827-8010","http://www.dvch.org/dvch/Locations/FairmountPrimaryCareCenteratStJosephs/tabid/134/language/en-US/Default.aspx","N/A","1600 W. Girard Avenue"],
          [-75.1364584900247, 39.999543426506776, 6, "Maria de los Santos Health Center","DVCH",19133, "215-291-2500","http://www.dvch.org/dvch/Locations/MariadelosSantosHealthCenter/tabid/102/language/en-US/Default.aspx","215-291-2500","401-455 West Allegheny Ave"],
          [-75.11041229887653, 40.01193495066715, 7, "Parkview OB/Gyn & Podiatry Services", "DVCH",19124, "215-537-7695","http://dvch.org/dvch/Locations/ParkviewHealthCenter/tabid/104/language/en-US/Default.aspx","N/A","841 E. Hunting Park Avenue Suite 201"],
          [-75.1143429301342, 39.99603493093682, 8, "Esperanza Health Center - main (Kensington Avenue)", "Esperanza",19134, "215-831-1100","http://www.esperanzahealthcenter.org/","215-831-1100","3156 Kensington Ave "],
          [-75.14097060863617, 39.98886147155695, 9, "Esperanza Health Center  (Fifth Street)", "Esperanza",19133, "215-221-6633","http://www.esperanzahealthcenter.org/","N/A","2490 North 5th Street "],
          [-75.13685965438314,40.01910717508576,10,"HuntingPark","Esperanza",19140,"215-302-3600","http://www.esperanzahealthcenter.org/","N/A","4417N.6thStreet"],
          [-75.22914840174073,39.929146144466095,11,"TheHealthAnnex","FPCN",19143,"215-727-4721","http://www.fpcn.com/","215-727-4721","6120WoodlandAvenue"],
          [-75.15481743211816,39.96797689150463,12,"EleventhStreetHealthServicesofDrexelUniversity","FPCN",19123,"215-769-1100","http://www.fpcn.com/","215-769-1100","850North11thStreet"],
          [-75.17151190788698,40.016834873986674,13,"AbbotsfordFallsFamilyPracticeandCounseling","FPCN",19144,"215-843-9720","http://www.fpcn.com/","N/A","4700WissahickonAveBuildingD,Suite119"],
          [-75.21451422100864,39.939434302152065,14,"WoodlandAvenueMedicalCenter","GPHA",19143,"215-726-9807","http://www.gphainc.org/sitesMap.asp","215-726-9807","5000WoodlandAvenue"],
          [-75.1571583374903,39.93591676535985,15,"SoutheastHealthCenter","GPHA",19147,"215-339-5100","http://www.gphainc.org/sitesMap.asp","215-339-5100","800WashingtonAvenue"],
          [-75.18823365396396,39.92670972057362,16,"WilsonParkMedicalCenter","GPHA",19145,"215-755-7700","http://www.gphainc.org/sitesMap.asp","215-755-6866","2520SnyderAvenue"],
          [-75.15947687109806,39.936546035254,17,"ChinatownMedicalServices","GPHA",19140,"215-627-8000","http://www.gphainc.org/sitesMap.asp","N/A","930WashingtonAvenue"],
          [-75.15158332421545,39.930609043493554,18,"4thStreetMedicalSuite","GPHA",19147,"215-339-1079","http://www.gphainc.org/sitesMap.asp","N/A","1401South4thStreet"],
          [-75.08613560085996,40.01422279070762,19,"FrankfordAvenueHealthCenter","GPHA",19124,"215-744-1302","http://www.gphainc.org/sitesMap.asp","215-535-1990","4510FrankfordAvenue"],
          [-75.22060564182367,39.93531827967249,20,"GreaterPhiladelphiaHealthAction,Inc.DentalandBehavorialHealthcare","GPHA",19143,"215-724-4700","http://www.gphainc.org/sitesMap.asp","215-724-4700","5501WoodlandAvenue"],
          [-75.15790992258191,39.92280372483758,21,"SnyderAvenueDentalCenter","GPHA",19148,"215-334-4900","http://www.gphainc.org/sitesMap.asp","215-334-4900","640SnyderAvenue"],
          [-75.13539371160077,39.993066351162625,22,"CongresoHealthCenter","PHMC",19133,"267-765-2272","http://www.phmc.org/site/programs/health-care-centers/congreso-health-center","N/A","216WestSomersetStreet"],
          [-75.15896583067315,39.9591642734026,23,"PHMCCareClinic","PHMC",19123,"215-825-8220","http://www.phmc.org/site/programs/health-care-centers/375-phmc-care-clinic","N/A","1200CallowhillStreetSuite101"],
          [-75.15565137433735,39.948882865213776,24,"MaryHowardHealthCenter","PHMC",19107,"215-592-4500","http://www.phmc.org/site/programs/health-care-centers/mary-howard","N/A","125South9thStreet"],
          [-75.14864813169741,39.98138576637114,25,"PHMCHealthConnection","PHMC",19122,"215-765-6690","http://www.phmc.org/site/programs/health-care-centers/phmc-health-connection","N/A","1900North9thStreet"],
          [-75.12100695370191,40.036815083614286,26,"RisingSunHealthCenter","PHMC",19120,"215-279-9666","http://www.phmc.org/site/programs/health-care-centers/rising-sun","N/A","5675NorthFrontStreet"],
          [-75.16498701262651,39.97819819408861,27,"MeadeFamilyHealthCenter","QCHC",19121,"215-765-9501","http://www.qchc.org/AboutUs.htm","215-765-9501","1800WestOxfordStreet"],
          [-75.17247604484523,39.99633279019039,28,"QCHCFamilyHealthCenter","QCHC",19132,"215-227-0300","http://www.qchc.org/AboutUs.htm","215-227-0300","2501WestLehighAvenue"],
          [-75.17422754056778,39.97644271072366,29,"VauxFamilyHealthCenter","QCHC",19121,"215-236-8289","http://www.qchc.org/AboutUs.htm","215-236-8289","2300WestMasterStreet"],
          [-75.14541449360493,40.025833736868066,30,"CookeFamilyHealthCenter","QCHC",19141,"215-457-6902","http://www.qchc.org/AboutUs.htm","215-457-6902","1300WestLoudonStreet"],
          [-75.23845470248338,39.95850513313452,31,"SayreHealth","Sayre-Penn",19139,"215-474-4444","http://www.sayrehealth.org/","N/A","5800WalnutSt"],
          [-75.22519602393405,39.96528153231064,32,"SpectrumHealthCenter","Spectrum",19139,"215-471-2761","http://www.spechealth.org/index.php/home/location","215-471-2761","5201HaverfordAve"],
          [-75.15853496412691,39.9750982781126,33,"BroadStreetHealthCenter","Spectrum",19122,"215-235-7944","http://www.spechealth.org/index.php/home/location","N/A","1415NorthBroadStreetProgressHumanServiceB*"],
          [-75.16942182662515,39.926223828385766,34,"HealthCenter2","PDPH",19145,"215-685-1803","http://www.phila.gov/health/AmbulatoryHealth/hc2.html","215-685-1822","1930SouthBroadStreetConstitutionHealthPlaza*"],
          [-75.209062933417,39.94878144146083,35,"HealthCenter3","PDPH",19104,"215-685-7504","http://www.phila.gov/health/AmbulatoryHealth/hc3.html","215-685-7506","555S.43rdStreet"],
          [-75.210940882576,39.96254511416073,36,"HealthCenter4","PDPH",19104,"215-685-7601","http://www.phila.gov/health/AmbulatoryHealth/hc4.html","215-685-7605","4400HaverfordAvenue"],
          [-75.16677131948624,39.98311056325324,37,"HealthCenter5","PDPH",19121,"215-685-2933","http://www.phila.gov/health/AmbulatoryHealth/hc5.html","215-685-2938","1900N.20thStreet"],
          [-75.1419504913517,39.96991452552731,38,"HealthCenter6","PDPH",19123,"215-685-3803","http://www.phila.gov/health/AmbulatoryHealth/hc6.html","215-685-3816","301W.GirardAvenue"],
          [-75.17274206808868,40.03787852063628,39,"HealthCenter9","PDPH",19144,"215-685-5701","http://www.phila.gov/health/AmbulatoryHealth/hc9.html","215-685-5738","131E.CheltenAvenue"],
          [-75.06128762221265,40.04836450544958,40,"HealthCenter10","PDPH",19149,"215-685-0639","http://www.phila.gov/health/AmbulatoryHealth/hc10.html","215-685-0608","2230CottmanAvenue"],
          [-75.17907078347366,39.99083952253368,41,"StrawberryMansionHealthCenter","PDPH",19132,"215-685-2401","http://www.phila.gov/health/AmbulatoryHealth/hcStrawberry.html","N/A","2840DauphinStreet"],
          [-75.17373749634852,40.00946907166144,42,"QcareConvenientCareClinic@Shoprite","FPCN",19120,"267-597-3610","http://www.fpcn.com/?page_id=128","N/A","2800FoxStreetUnitA"],
          [-75.16085860238907,40.01277040246404,43,"HuntingParkHealth&DentalCenter","GPHA",19140,"215-228-9300","http://www.gphainc.org/sitesMap.asp","215-229-1390","1999W.HuntingParkAvenue"],
          [-75.16803021640862,39.932635546404335,44,"UrbanHealthInitiatives","UrbanHealthInitiatives",19146,"215-755-0700x1","http://www.myuhi.org/","N/A","1408SouthBroadStreet"],
          [-75.17022950680595,39.980241690204736,45,"KleinWellnessCenter","ProjectHOME",19121,"215-320-6187","https://projecthome.org/skwc","215-320-6187","2144CecilBMooreAve"]]

var myIcon = L.icon({
    iconUrl: 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png',
    iconSize: [38, 40],
    iconAnchor: [22, 94],
    popupAnchor: [-3, -76],
          });

var addMarkers = function(map){
  for (var i = 1; i <= healthCentersArray.length; i++) {
    if(healthCentersArray[i][8] === 'N/A'){
      L.marker([healthCentersArray[i][1], healthCentersArray[i][0]]).addTo(map)
      .bindPopup(healthCentersArray[i][3])
      .openPopup();
    } else {  L.marker([healthCentersArray[i][1], healthCentersArray[i][0]], {icon: myIcon}).addTo(map)
      .bindPopup(healthCentersArray[i][3])
      .openPopup();

    }
  }

}




      /* =====================

      End code

      ===================== */


      jsonToCsv(healthCentersArray);
      addMarkers(map);


    </script>
    <!--Your code ends here-->
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <!--stylesheet imports-->
    <link rel="stylesheet" href="leaflet.css" />
  </head>
  <body>
    <!--left panel-->
    <div style="position:fixed;left:0px;width:400px">
    </div>
    <!--map-->
    <div id="map" style="position:fixed;right:0px;left:400px;height:100%;">
    </div>

    <!--javascript imports-->
    <script src="leaflet.js"></script>
    <script src="health_centers.js"></script>

    <!--Your code starts here-->
    <script>

    //MANUALLY CREATED THE ARRAY FOR HEALTH CENTERS FROM health_centers.js:
     var healthCenters = [
            [-75.16472099534634, 40.034508187448395,"Covenant Health Services"],
            [-75.17898120530263, 40.06738292573648,"Mt. Pleasant Medical Center"],
            [-75.16141103997865, 39.967025897357665,"Fairmount Primary Care Center"],
            [-75.18387328197538, 39.9530635609646,"Fairmount Primary Care Center at Horizon Houses"],
            [-75.16276471850303, 39.97183994499194,"Fairmount Primary Care Center at St. Josephs Hospital"],
            [-75.1364584900247, 39.999543426506776,"Maria de los Santos Health Center"],
            [-75.11041229887653, 40.01193495066715,"Parkview OB/Gyn & Podiatry Services"],
            [-75.1143429301342, 39.99603493093682,"Esperanza Health Center - main (Kensington Avenue)"],
            [-75.14097060863617, 39.98886147155695,"Esperanza Health Center  (Fifth Street)"],
            [-75.13685965438314, 40.01910717508576,"Hunting Park"],
            [-75.22914840174073, 39.929146144466095,"The Health Annex"],
            [-75.15481743211816, 39.96797689150463,"Eleventh Street Health Services of Drexel University"],
            [-75.17151190788698, 40.016834873986674,"Abbotsford Falls  Family Practice and Counseling"],
            [-75.21451422100864, 39.939434302152065,"Woodland Avenue Medical Center"],
            [-75.1571583374903, 39.93591676535985,"Southeast Health Center"],
            [-75.18823365396396, 39.92670972057362,"Wilson Park Medical Center"],
            [-75.15947687109806, 39.936546035254,"Chinatown Medical Services"],
            [-75.15158332421545, 39.930609043493554,"4th Street Medical Suite"],
            [-75.08613560085996, 40.01422279070762,"Frankford Avenue Health Center"],
            [-75.22060564182367, 39.93531827967249,"Greater Philadelphia Health Action, Inc. Dental and Behavorial Healthcare"],
            [-75.15790992258191, 39.92280372483758,"Snyder Avenue Dental Center"],
            [-75.13539371160077, 39.993066351162625,"Congreso Health Center"],
            [-75.15896583067315, 39.9591642734026,"PHMC Care Clinic"],
            [-75.15565137433735, 39.948882865213776,"Mary Howard Health Center"],
            [-75.14864813169741, 39.98138576637114,"PHMC Health Connection"],
            [-75.12100695370191, 40.036815083614286,"Rising Sun Health Center"],
            [-75.16498701262651, 39.97819819408861,"Meade Family Health Center"],
            [-75.17247604484523, 39.99633279019039,"QCHC Family Health Center"],
            [-75.17422754056778, 39.97644271072366,"Vaux Family Health Center"],
            [-75.14541449360493, 40.025833736868066,"Cooke Family Health Center"],
            [-75.23845470248338, 39.95850513313452,"Sayre Health"],
            [-75.22519602393405, 39.96528153231064,"Spectrum Health Center"],
            [-75.15853496412691, 39.9750982781126,"Broad Street Health Center"],
            [-75.16942182662515, 39.926223828385766,"Health Center 2"],
            [-75.209062933417, 39.94878144146083,"Health Center 3"],
            [-75.210940882576, 39.96254511416073,"Health Center 4"],
            [-75.16677131948624, 39.98311056325324,"Health Center 5"],
            [-75.1419504913517, 39.96991452552731,"Health Center 6"],
            [-75.17274206808868, 40.03787852063628,"Health Center 9"],
            [-75.06128762221265, 40.04836450544958,"Health Center 10"],
            [-75.17907078347366, 39.99083952253368,"Strawberry Mansion Health Center"],
            [-75.17373749634852, 40.00946907166144,"Qcare Convenient Care Clinic @ Shoprite"],
            [-75.16085860238907, 40.01277040246404,"Hunting Park Health & Dental Center"],
            [-75.16803021640862, 39.932635546404335,"Urban Health Initiatives"],
          ];

      var map = L.map('map', {
        center: [39.9522, -75.1639],
        zoom: 14
      });
      var Stamen_TonerLite = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {
	      attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      	subdomains: 'abcd',
      	minZoom: 0,
      	maxZoom: 20,
      	ext: 'png'
      }).addTo(map);

//THIS LOOP COMMAND ADDS THE POINTS TO THE MAP AND THEIR POPUPS, FOUND OUT HOW TO DO FROM http://www.d3noob.org/2014/02/adding-multiple-markers-to-leafletjs-map.html:
       for (var i = 0; i < healthCenters.length; i++) { //var i = 0 makes the loop command start at the "zeroth" sub-array of healthCenters. i < healthCenters.length makes it so the loop goes through the entire healthCenters array from first to last sub-array. i++ makes it so 1 constantly gets added to i in sequence, which further ensures that the loop command will iterate through the entire healthCenters array (tells loop command to first map sub-array 1's point, then sub-array 2's point, etc.)
			marker = new L.marker([healthCenters[i][1],healthCenters[i][0]]) //Adds each point to the map. [i] iterates through each of healthCenters's sub arrays (similar to rows of a dataframe), mapping the long point (the "first" element of each sub-array) and the lat point (the "zeroth" element of each sub-array)
				.bindPopup(healthCenters[i][2]) //Adds a popup to each point showing its name. Makes the popup show the health centers' names (the "second" element of each sub-array)
				.addTo(map); //Adds both the points and popups to the map
		}

    </script>
    <script>
      /* =====================

      # Week 2 - Assignment

      ## Introduction

       This week's assignment as having two separate parts:

       1. Log a series of arrays to the console that represents the health_centers dataset
       in array form. For example, [{'first': 1, 'second': 44}, {'first': 2, 'second': 12}]
       becomes [['first','second'],[1, 44],[2, 12]]

       2. Put a marker on the map for each health center in the specified lat/lng coordinates
       with a popup (a simple text dialog) that shows that location's name when its marker
       is clicked.

       EXTRA: Some of these locations offer dental services as well. Can you find some way to
       give dental locations a different icon? (Here's some relevant documentation:
       http://leafletjs.com/reference.html#icon)

       Remember: functions are meant to facilitate code comprehension and reuse. Try to
       use them to organize your code.
      ===================== */


      /* =====================

      Start code

      ===================== */

      var jsonToCsv = function(json) { console.log(json); };


      var addhealthCenters = function(map) {};

      /* =====================

      End code

      ===================== */


      jsonToCsv(healthCenters);
      addhealthCenters(map);
    </script>
    <!--Your code ends here-->
  </body>
</html>
